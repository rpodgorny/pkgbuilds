# Maintainer: Radek Podgorny <radek@podgorny.cz>
pkgname='faddnsc-hg'
pkgver=r141.822485860225
pkgrel=1
pkgdesc="Freakin' Awesome Dynamic DNS Updater"
arch=('any')
url="https://podgorny.cz/faddns"
#license=('PSF')
depends=('python' 'python-docopt')
makedepends=('mercurial')
#options=(!emptydirs)
backup=('etc/faddnsc.conf')
source=('hg+http://hg.podgorny.cz/faddns')
md5sums=('SKIP')

pkgver() {
	cd "$srcdir/faddns"
	printf "r%s.%s" "$(hg identify -n)" "$(hg identify -i)"
}

package() {
	cd "$srcdir/faddns"
	python setup.py install --root="$pkgdir"/ --optimize=1

	install -d $pkgdir/usr/lib/systemd/system
	install faddnsc.service $pkgdir/usr/lib/systemd/system/

	install -d $pkgdir/etc
	install faddnsc.ini $pkgdir/etc/faddnsc.conf

	#install -d $pkgdir/usr/bin
	#install nsupdate.py $pkgdir/usr/bin/nsupdate
	#install server.py $pkgdir/usr/bin/nsupdate-server
	#install nsupdate-zone.py $pkgdir/usr/bin/
}
